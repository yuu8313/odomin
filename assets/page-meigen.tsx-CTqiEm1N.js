import{r as w,j as o}from"./react-BhSE-Csv.js";import{b as M}from"./index-CelrODDd.js";import{L as F}from"./component-layout-DvakhPXe.js";import{s as I}from"./page-MeigenResponsive.module.css-CJXdD6am.js";import{u as z}from"./react-router-_kT901Jg.js";import{m as N,A as D}from"./framer-motion-C_b82e0L.js";const b=(n,i)=>{const e=n.replace("#",""),r=parseInt(e.substring(0,2),16),d=parseInt(e.substring(2,4),16),a=parseInt(e.substring(4,6),16),l=A(r,d,a);l.l=Math.max(0,Math.min(100,l.l+i));const[u,m,h]=P(l);return`#${E(u.toString(16))}${E(m.toString(16))}${E(h.toString(16))}`},A=(n,i,e)=>{n/=255,i/=255,e/=255;const r=Math.max(n,i,e),d=Math.min(n,i,e);let a=0,l=0;const u=(r+d)/2;if(r===d)a=l=0;else{const m=r-d;switch(l=u>.5?m/(2-r-d):m/(r+d),r){case n:a=(i-e)/m+(i<e?6:0);break;case i:a=(e-n)/m+2;break;case e:a=(n-i)/m+4;break}a/=6}return{h:a*100,s:l*100,l:u*100}},P=({h:n,s:i,l:e})=>{n/=100,i/=100,e/=100;let r,d,a;if(i===0)r=d=a=e;else{const l=e<.5?e*(1+i):e+i-e*i,u=2*e-l;r=S(u,l,n+1/3),d=S(u,l,n),a=S(u,l,n-1/3)}return[Math.round(r*255),Math.round(d*255),Math.round(a*255)]},S=(n,i,e)=>(e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(i-n)*6*e:e<1/2?i:e<2/3?n+(i-n)*(2/3-e)*6:n),E=n=>n.length===1?`0${n}`:n,q=n=>new Promise(i=>{const e=new Image;e.crossOrigin="Anonymous",e.src=n,e.onload=()=>{const r=document.createElement("canvas");r.width=e.width,r.height=e.height;const d=r.getContext("2d");if(d){d.drawImage(e,0,0);const a=d.getImageData(0,0,r.width,r.height);let l=0,u=0;for(let h=0;h<a.data.length;h+=4){const j=a.data[h],g=a.data[h+1],t=a.data[h+2],f=(j*.299+g*.587+t*.114)/255;l+=f,u++}const m=l/u;i(m)}}}),O=n=>{const r=n*.09999999999999999+.05;return Math.max(.05,Math.min(.15,r))},X=(n,i,e)=>{const r=window.innerWidth<=768,d=r?3:4;let a=r?n.replace(/<サイズ=\d+(?:\.\d{1,9})?>/g,""):n,l=d;if(!r){const s=n.match(/^<サイズ=(\d+(?:\.\d{1,9})?)>/);s&&(l=parseFloat(s[1]),a=n.replace(/^<サイズ=\d+(?:\.\d{1,9})?>/g,""))}const u=[];a=a.replace(/'/g,(s,x)=>(u.push({index:x,char:s,delay:.3}),s));const m=[{open:"<b>",close:"</b>",style:{fontWeight:"bold"}},{open:"<i>",close:"</i>",style:{fontStyle:"italic"}},{open:"<u>",close:"</u>",style:{textDecoration:"underline"}},{open:"<s>",close:"</s>",style:{textDecoration:"line-through"}},{open:"<emoji>",close:"</emoji>",style:{color:"inherit",fontSize:"inherit",WebkitTextFillColor:"transparent",background:"none",textShadow:"none"}}];let h={fontSize:`${l}rem`},j=[],g=0;const t=[];for(const s of m){let x=a.indexOf(s.open);for(;x!==-1;)t.push({index:x,type:"open",pattern:s}),x=a.indexOf(s.open,x+1);let p=a.indexOf(s.close);for(;p!==-1;)t.push({index:p,type:"close",pattern:s}),p=a.indexOf(s.close,p+1)}t.sort((s,x)=>s.index-x.index);let f=[];for(const s of t){if(s.index>g){const p=a.slice(g,s.index).split("<br>");p.forEach(($,c)=>{$.trim()&&Array.from($).forEach((v,C)=>{const k=u.find(B=>B.index===g+C),T=k?k.delay:0;f.push(o.jsx(N.span,{initial:{opacity:0,y:30,scale:0,rotateX:90},animate:{opacity:1,y:0,scale:1,rotateX:0},transition:{duration:.15,delay:f.length*.05+T,ease:"easeOut",type:"spring",stiffness:300,damping:20},style:{...h,display:"inline-block",transformOrigin:"center bottom",perspective:"1000px",WebkitTextFillColor:"inherit",background:"none",filter:`drop-shadow(2px 2px 0 ${e||b(i,30)}) drop-shadow(-1px -1px 0 ${e||b(i,30)})`},children:v},f.length))}),c<p.length-1&&f.push(o.jsx("br",{},f.length))})}if(g=s.index+(s.type==="open"?s.pattern.open.length:s.pattern.close.length),s.type==="open")j.push(s.pattern),Object.assign(h,s.pattern.style);else{const x=j.findIndex(p=>p===s.pattern);x!==-1&&(j.splice(x,1),h={fontSize:`${l}rem`},j.forEach(p=>{Object.assign(h,p.style)}))}}if(g<a.length){const x=a.slice(g).split("<br>");x.forEach((p,$)=>{p.trim()&&Array.from(p).forEach((y,v)=>{const C=u.find(T=>T.index===g+v),k=C?C.delay:0;f.push(o.jsx(N.span,{initial:{opacity:0,y:30,scale:0,rotateX:90},animate:{opacity:1,y:0,scale:1,rotateX:0},transition:{duration:.15,delay:f.length*.05+k,ease:"easeOut",type:"spring",stiffness:300,damping:20},style:{...h,display:"inline-block",transformOrigin:"center bottom",perspective:"1000px",WebkitTextFillColor:"inherit",background:"none",filter:`drop-shadow(2px 2px 0 ${e||b(i,30)}) drop-shadow(-1px -1px 0 ${e||b(i,30)})`},children:y},f.length))}),$<x.length-1&&f.push(o.jsx("br",{},f.length))})}return f},L=()=>{z();const[n,i]=w.useState(0),[e,r]=w.useState(0),[d,a]=w.useState(!1),[l,u]=w.useState(!1),[m,h]=w.useState(0),[j,g]=w.useState(null),t=M[n];w.useEffect(()=>{q(t.imageUrl).then(c=>{h(c)})},[t.imageUrl]),w.useEffect(()=>{if(l&&!d){const c=setTimeout(()=>{s()},5e3);return()=>clearTimeout(c)}},[l,n,d]),w.useEffect(()=>()=>{j&&clearTimeout(j)},[j]);const f=()=>{if(d)return;r(-1),a(!0);const c=setTimeout(()=>{i(y=>(y-1+M.length)%M.length),a(!1)},500);g(c)},s=()=>{if(d)return;r(1),a(!0);const c=setTimeout(()=>{i(y=>(y+1)%M.length),a(!1)},500);g(c)},x=c=>{if(d)return;const y=M.find(k=>k.mainColor===c);if(!y){console.error(`該当する色の名言が見つかりませんでした: ${c}`);return}const v=M.indexOf(y);if(v===-1){console.error(`該当する名言のインデックスが見つかりませんでした: ${c}`);return}a(!0);const C=setTimeout(()=>{i(v),a(!1)},500);g(C)};w.useEffect(()=>{const c=setTimeout(()=>{a(!1)},1e3);return()=>clearTimeout(c)},[n]),w.useEffect(()=>{n===0&&u(!1)},[n]);const p={enter:c=>({x:c>0?80:-80,y:20,opacity:0,scale:.9,rotateY:c>0?-15:15,filter:`blur(${Math.max(0,Math.min(8,8))}px)`,zIndex:0,transition:{duration:.4,ease:"easeInOut"}}),center:{x:0,y:0,opacity:1,scale:1,rotateY:0,filter:`blur(${Math.max(0,Math.min(8,0))}px)`,zIndex:1,transition:{duration:.6,type:"spring",stiffness:300,damping:25,mass:1.2}},exit:c=>({x:c<0?80:-80,y:-20,opacity:0,scale:.9,rotateY:c<0?-15:15,filter:`blur(${Math.max(0,Math.min(8,8))}px)`,zIndex:0,transition:{duration:.4,ease:"easeInOut"}})},$={initial:{opacity:0,scale:1.2,filter:`blur(${Math.max(0,Math.min(8,8))}px)`},animate:{opacity:O(m),scale:.85,filter:`blur(${Math.max(0,Math.min(8,0))}px)`,transition:{duration:.6,ease:"easeOut"}},exit:{opacity:0,scale:1.2,filter:`blur(${Math.max(0,Math.min(8,8))}px)`,transition:{duration:.4,ease:"easeIn"}}};return o.jsx(F,{children:o.jsxs("div",{className:`container mx-auto px-4 py-8 h-screen flex flex-col items-center justify-center relative ${I.quoteContainer}`,children:[o.jsxs("div",{className:`quote-card w-full max-w-4xl p-6 sm:p-10 md:p-16 rounded-2xl card-shadow relative overflow-hidden border-t-4 border-t-[--quote-main-color] ${I.quoteCard}`,style:{background:`radial-gradient(circle at 10% 20%, ${t.mainColor}${Math.round(O(m)*100)} 0%, ${t.subColor||b(t.mainColor,30)}${Math.round(O(m)*100)} 90%),
                           linear-gradient(135deg, ${t.mainColor}${Math.round(O(m)*100)} 0%, ${t.subColor||b(t.mainColor,50)}${Math.round(O(m)*100)} 100%)`},children:[o.jsx(N.div,{initial:$.initial,animate:$.animate,exit:$.exit,className:"absolute inset-0 w-full h-full opacity-15",style:{backgroundImage:`url('${t.imageUrl}')`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",filter:"grayscale(30%) contrast(130%)",transform:"scale(0.85)",mixBlendMode:"multiply",animation:"subtle-pulse 15s ease-in-out infinite"}}),o.jsx(D,{mode:"wait",initial:!1,custom:e,children:o.jsxs(N.div,{custom:e,variants:p,initial:"enter",animate:"center",exit:"exit",className:"relative z-10",whileHover:{scale:1.02,rotateY:5,rotateX:-5,transition:{duration:.2,type:"spring",stiffness:300}},whileTap:{scale:.98,rotateY:-5,rotateX:5,transition:{duration:.1}},children:[o.jsx("div",{className:`quote-text text-3xl sm:text-5xl md:text-6xl lg:text-7xl font-bold font-quote tracking-tight leading-tight text-center mb-8 glow-text ${I.quoteText}`,style:{textShadow:`3px 3px 0 ${t.subColor||b(t.mainColor,30)}, -1px -1px 0 ${t.subColor||b(t.mainColor,30)}`,background:`linear-gradient(135deg, ${t.mainColor} 0%, ${t.subColor||b(t.mainColor,50)} 100%)`,WebkitBackgroundClip:"text",backgroundClip:"text",color:"white",mixBlendMode:"difference",letterSpacing:"-0.01em",transform:"perspective(1000px) rotateX(2deg)",padding:"0.2em 0"},children:X(t.text,t.mainColor,t.subColor)}),o.jsxs("div",{className:"mt-10 sm:mt-16 flex flex-col sm:flex-row items-center justify-center space-y-4 sm:space-y-0 sm:space-x-6 relative author-info",children:[o.jsx("div",{className:"absolute inset-0 w-full h-full opacity-10 rounded-full",style:{background:`linear-gradient(90deg, ${t.mainColor}, ${t.subColor||b(t.mainColor,30)})`}}),o.jsx(N.div,{initial:{scale:0,rotate:-15},animate:{scale:1,rotate:0,transition:{type:"spring",stiffness:260,damping:20,delay:.7}},className:"relative w-16 h-16 sm:w-20 sm:h-20 overflow-hidden rounded-full border-4 border-white shadow-lg",children:o.jsx("img",{src:t.imageUrl,alt:t.author,className:"w-full h-full object-cover"})}),o.jsxs(N.div,{initial:{x:-10,opacity:0},animate:{x:0,opacity:1,transition:{delay:.9,duration:.5,type:"spring",stiffness:100}},className:"text-center sm:text-left relative",children:[o.jsx("p",{className:"text-webmania-dark font-semibold text-xl mb-1",children:t.author}),o.jsx("div",{className:"author-badge px-3 py-1 rounded-full inline-block",style:{background:`linear-gradient(90deg, ${t.mainColor}, ${t.subColor||b(t.mainColor,30)})`,boxShadow:`0 3px 10px ${t.mainColor}50`},children:o.jsx("p",{className:"text-white text-sm font-medium",children:t.title})})]})]})]},n)})]}),o.jsx("div",{className:"flex space-x-4 mt-8",children:l?null:o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"flex items-center justify-center",children:o.jsx("button",{onClick:f,disabled:!1,className:`
                    px-4 py-2 rounded-full transition-all duration-300
                    ${d?"opacity-50 cursor-not-allowed":""}
                    hover:scale-105 hover:shadow-lg
                  `,style:{background:`linear-gradient(135deg, ${t.mainColor} 0%, ${t.subColor||b(t.mainColor,50)} 100%)`,boxShadow:"0 4px 15px rgba(0, 0, 0, 0.2)",color:"white",border:"none",cursor:"pointer"},children:o.jsx("span",{className:"text-lg",children:"前の語録"})})}),o.jsx("div",{className:"flex items-center justify-center",children:o.jsx("button",{onClick:s,disabled:!1,className:`
                    px-4 py-2 rounded-full transition-all duration-300
                    ${d?"opacity-50 cursor-not-allowed":""}
                    hover:scale-105 hover:shadow-lg
                  `,style:{background:`linear-gradient(135deg, ${t.mainColor} 0%, ${t.subColor||b(t.mainColor,50)} 100%)`,boxShadow:"0 4px 15px rgba(0, 0, 0, 0.2)",color:"white",border:"none",cursor:"pointer"},children:o.jsx("span",{className:"text-lg",children:"次の語録"})})})]})}),o.jsx("div",{className:"mt-4",children:o.jsx("button",{onClick:()=>u(!l),className:`
              px-4 py-2 rounded-full transition-all duration-300
              ${l?"bg-red-500 hover:bg-red-600":"bg-blue-500 hover:bg-blue-600"}
              text-white font-semibold
              hover:scale-105 hover:shadow-lg
            `,children:o.jsx("span",{className:"text-lg",children:l?"自動再生: ON":"自動再生: OFF"})})}),o.jsx("div",{className:"mt-4 flex flex-wrap justify-center gap-2",children:[{color:"#FC689C",name:"おどろく"},{color:"#8DC77B",name:"凸もり"},{color:"#B9E180",name:"しぇいど"},{color:"#8DDDF8",name:"さぁーもん"},{color:"#AD56A4",name:"べる"},{color:"#B6B6B6",name:"ななっし～"},{color:"#DC3A38",name:"うたい"},{color:"#4E72FC",name:"あふぇりる"},{color:"#FF5949",name:"ニグ"}].map((c,y)=>o.jsx("button",{onClick:()=>x(c.color),className:"w-8 h-8 rounded-full border-2 border-white hover:scale-110 transition-transform",style:{background:c.color},title:`${c.name}の語録へ`},y))})]})})};export{L as M};
